{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { convertChildrenToColumns } from \"rc-table/es/hooks/useColumns\";\nimport CaretDownOutlined from '@ant-design/icons/CaretDownOutlined';\nimport CaretUpOutlined from '@ant-design/icons/CaretUpOutlined';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if ('children' in column) {\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.sortOrder\n        });\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterSates, triggerSorter, defaultSortDirections, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterSates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var upNode = sortDirections.includes('ascend') && React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === 'ascend'\n        })\n      });\n      var downNode = sortDirections.includes('descend') && React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === 'descend'\n        })\n      });\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          return React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-column-sorters\")\n          }, React.createElement(\"span\", null, renderColumnTitle(column.title, renderProps)), React.createElement(\"span\", {\n            className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), upNode && downNode))\n          }, React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n          }, upNode, downNode)));\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortDirection(sortDirections, sorterOrder),\n              multiplePriority: getMultiplePriority(column)\n            });\n\n            if (originOnClick) {\n              originOnClick(event);\n            }\n          };\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterSates, triggerSorter, defaultSortDirections, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref2) {\n    var sortOrder = _ref2.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[0])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref3) {\n    var sorter = _ref3.column.sorter,\n        sortOrder = _ref3.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === 'ascend' ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      columns = _ref4.columns,\n      children = _ref4.children,\n      onSorterChange = _ref4.onSorterChange,\n      sortDirections = _ref4.sortDirections;\n  var mergedColumns = React.useMemo(function () {\n    return columns || convertChildrenToColumns(children);\n  }, [children, columns]);\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref5) {\n      var column = _ref5.column,\n          sortOrder = _ref5.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref6) {\n        var key = _ref6.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}","map":{"version":3,"sources":["/home/youssef/Desktop/Spotify_FE/node_modules/antd/es/table/hooks/useSorter.js"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","_extends","assign","target","arguments","source","hasOwnProperty","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","from","arr2","_typeof","constructor","React","classNames","convertChildrenToColumns","CaretDownOutlined","CaretUpOutlined","getColumnKey","getColumnPos","renderColumnTitle","getMultiplePriority","column","sorter","multiple","getSortFunction","compare","nextSortDirection","sortDirections","current","indexOf","collectSortStates","columns","init","pos","sortStates","forEach","index","columnPos","concat","children","multiplePriority","sortOrder","defaultSortOrder","injectSorter","prefixCls","sorterSates","triggerSorter","defaultSortDirections","map","newColumn","columnKey","sorterState","find","_ref","sorterOrder","upNode","includes","createElement","className","active","downNode","title","renderProps","onHeaderCell","col","cell","originOnClick","onClick","event","stateToInfo","sorterStates","order","field","dataIndex","generateSorterInfo","list","filter","_ref2","getSortData","data","childrenColumnName","innerSorterStates","slice","sort","a","b","cloneData","runningSorters","_ref3","record1","record2","compareFn","compareResult","record","subRecords","useFilterSorter","_ref4","onSorterChange","mergedColumns","useMemo","_React$useState","useState","_React$useState2","setSortStates","mergedSorterStates","validate","collectedStates","validateStates","patchStates","state","multipleMode","columnTitleSorterProps","sortColumns","_ref5","sortColumn","sortState","newSorterStates","_ref6","transformColumns","innerColumns","getSorters"],"mappings":"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","sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { convertChildrenToColumns } from \"rc-table/es/hooks/useColumns\";\nimport CaretDownOutlined from '@ant-design/icons/CaretDownOutlined';\nimport CaretUpOutlined from '@ant-design/icons/CaretUpOutlined';\nimport { getColumnKey, getColumnPos, renderColumnTitle } from '../util';\n\nfunction getMultiplePriority(column) {\n  if (_typeof(column.sorter) === 'object' && typeof column.sorter.multiple === 'number') {\n    return column.sorter.multiple;\n  }\n\n  return false;\n}\n\nfunction getSortFunction(sorter) {\n  if (typeof sorter === 'function') {\n    return sorter;\n  }\n\n  if (sorter && _typeof(sorter) === 'object' && sorter.compare) {\n    return sorter.compare;\n  }\n\n  return false;\n}\n\nfunction nextSortDirection(sortDirections, current) {\n  if (!current) {\n    return sortDirections[0];\n  }\n\n  return sortDirections[sortDirections.indexOf(current) + 1];\n}\n\nfunction collectSortStates(columns, init, pos) {\n  var sortStates = [];\n  (columns || []).forEach(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n\n    if ('children' in column) {\n      sortStates = [].concat(_toConsumableArray(sortStates), _toConsumableArray(collectSortStates(column.children, init, columnPos)));\n    } else if (column.sorter) {\n      if ('sortOrder' in column) {\n        // Controlled\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.sortOrder\n        });\n      } else if (init && column.defaultSortOrder) {\n        // Default sorter\n        sortStates.push({\n          column: column,\n          key: getColumnKey(column, columnPos),\n          multiplePriority: getMultiplePriority(column),\n          sortOrder: column.defaultSortOrder\n        });\n      }\n    }\n  });\n  return sortStates;\n}\n\nfunction injectSorter(prefixCls, columns, sorterSates, triggerSorter, defaultSortDirections, pos) {\n  return (columns || []).map(function (column, index) {\n    var columnPos = getColumnPos(index, pos);\n    var newColumn = column;\n\n    if (newColumn.sorter) {\n      var sortDirections = newColumn.sortDirections || defaultSortDirections;\n      var columnKey = getColumnKey(newColumn, columnPos);\n      var sorterState = sorterSates.find(function (_ref) {\n        var key = _ref.key;\n        return key === columnKey;\n      });\n      var sorterOrder = sorterState ? sorterState.sortOrder : null;\n      var upNode = sortDirections.includes('ascend') && React.createElement(CaretUpOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-up\"), {\n          active: sorterOrder === 'ascend'\n        })\n      });\n      var downNode = sortDirections.includes('descend') && React.createElement(CaretDownOutlined, {\n        className: classNames(\"\".concat(prefixCls, \"-column-sorter-down\"), {\n          active: sorterOrder === 'descend'\n        })\n      });\n      newColumn = _extends(_extends({}, newColumn), {\n        className: classNames(newColumn.className, _defineProperty({}, \"\".concat(prefixCls, \"-column-sort\"), sorterOrder)),\n        title: function title(renderProps) {\n          return React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-column-sorters\")\n          }, React.createElement(\"span\", null, renderColumnTitle(column.title, renderProps)), React.createElement(\"span\", {\n            className: classNames(\"\".concat(prefixCls, \"-column-sorter\"), _defineProperty({}, \"\".concat(prefixCls, \"-column-sorter-full\"), upNode && downNode))\n          }, React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter-inner\")\n          }, upNode, downNode)));\n        },\n        onHeaderCell: function onHeaderCell(col) {\n          var cell = column.onHeaderCell && column.onHeaderCell(col) || {};\n          var originOnClick = cell.onClick;\n\n          cell.onClick = function (event) {\n            triggerSorter({\n              column: column,\n              key: columnKey,\n              sortOrder: nextSortDirection(sortDirections, sorterOrder),\n              multiplePriority: getMultiplePriority(column)\n            });\n\n            if (originOnClick) {\n              originOnClick(event);\n            }\n          };\n\n          cell.className = classNames(cell.className, \"\".concat(prefixCls, \"-column-has-sorters\"));\n          return cell;\n        }\n      });\n    }\n\n    if ('children' in newColumn) {\n      newColumn = _extends(_extends({}, newColumn), {\n        children: injectSorter(prefixCls, newColumn.children, sorterSates, triggerSorter, defaultSortDirections, columnPos)\n      });\n    }\n\n    return newColumn;\n  });\n}\n\nfunction stateToInfo(sorterStates) {\n  var column = sorterStates.column,\n      sortOrder = sorterStates.sortOrder;\n  return {\n    column: column,\n    order: sortOrder,\n    field: column.dataIndex,\n    columnKey: column.key\n  };\n}\n\nfunction generateSorterInfo(sorterStates) {\n  var list = sorterStates.filter(function (_ref2) {\n    var sortOrder = _ref2.sortOrder;\n    return sortOrder;\n  }).map(stateToInfo); // =========== Legacy compatible support ===========\n  // https://github.com/ant-design/ant-design/pull/19226\n\n  if (list.length === 0 && sorterStates.length) {\n    return _extends(_extends({}, stateToInfo(sorterStates[0])), {\n      column: undefined\n    });\n  }\n\n  if (list.length <= 1) {\n    return list[0] || {};\n  }\n\n  return list;\n}\n\nexport function getSortData(data, sortStates, childrenColumnName) {\n  var innerSorterStates = sortStates.slice().sort(function (a, b) {\n    return b.multiplePriority - a.multiplePriority;\n  });\n  var cloneData = data.slice();\n  var runningSorters = innerSorterStates.filter(function (_ref3) {\n    var sorter = _ref3.column.sorter,\n        sortOrder = _ref3.sortOrder;\n    return getSortFunction(sorter) && sortOrder;\n  }); // Skip if no sorter needed\n\n  if (!runningSorters.length) {\n    return cloneData;\n  }\n\n  return cloneData.sort(function (record1, record2) {\n    for (var i = 0; i < runningSorters.length; i += 1) {\n      var sorterState = runningSorters[i];\n      var sorter = sorterState.column.sorter,\n          sortOrder = sorterState.sortOrder;\n      var compareFn = getSortFunction(sorter);\n\n      if (compareFn && sortOrder) {\n        var compareResult = compareFn(record1, record2, sortOrder);\n\n        if (compareResult !== 0) {\n          return sortOrder === 'ascend' ? compareResult : -compareResult;\n        }\n      }\n    }\n\n    return 0;\n  }).map(function (record) {\n    var subRecords = record[childrenColumnName];\n\n    if (subRecords) {\n      return _extends(_extends({}, record), _defineProperty({}, childrenColumnName, getSortData(subRecords, sortStates, childrenColumnName)));\n    }\n\n    return record;\n  });\n}\nexport default function useFilterSorter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      columns = _ref4.columns,\n      children = _ref4.children,\n      onSorterChange = _ref4.onSorterChange,\n      sortDirections = _ref4.sortDirections;\n  var mergedColumns = React.useMemo(function () {\n    return columns || convertChildrenToColumns(children);\n  }, [children, columns]);\n\n  var _React$useState = React.useState(collectSortStates(mergedColumns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortStates = _React$useState2[0],\n      setSortStates = _React$useState2[1];\n\n  var mergedSorterStates = React.useMemo(function () {\n    var validate = true;\n    var collectedStates = collectSortStates(mergedColumns, false); // Return if not controlled\n\n    if (!collectedStates.length) {\n      return sortStates;\n    }\n\n    var validateStates = [];\n\n    function patchStates(state) {\n      if (validate) {\n        validateStates.push(state);\n      } else {\n        validateStates.push(_extends(_extends({}, state), {\n          sortOrder: null\n        }));\n      }\n    }\n\n    var multipleMode = null;\n    collectedStates.forEach(function (state) {\n      if (multipleMode === null) {\n        patchStates(state);\n\n        if (state.sortOrder) {\n          if (state.multiplePriority === false) {\n            validate = false;\n          } else {\n            multipleMode = true;\n          }\n        }\n      } else if (multipleMode && state.multiplePriority !== false) {\n        patchStates(state);\n      } else {\n        validate = false;\n        patchStates(state);\n      }\n    });\n    return validateStates;\n  }, [mergedColumns, sortStates]); // Get render columns title required props\n\n  var columnTitleSorterProps = React.useMemo(function () {\n    var sortColumns = mergedSorterStates.map(function (_ref5) {\n      var column = _ref5.column,\n          sortOrder = _ref5.sortOrder;\n      return {\n        column: column,\n        order: sortOrder\n      };\n    });\n    return {\n      sortColumns: sortColumns,\n      // Legacy\n      sortColumn: sortColumns[0] && sortColumns[0].column,\n      sortOrder: sortColumns[0] && sortColumns[0].order\n    };\n  }, [mergedSorterStates]);\n\n  function triggerSorter(sortState) {\n    var newSorterStates;\n\n    if (sortState.multiplePriority === false || !mergedSorterStates.length || mergedSorterStates[0].multiplePriority === false) {\n      newSorterStates = [sortState];\n    } else {\n      newSorterStates = [].concat(_toConsumableArray(mergedSorterStates.filter(function (_ref6) {\n        var key = _ref6.key;\n        return key !== sortState.key;\n      })), [sortState]);\n    }\n\n    setSortStates(newSorterStates);\n    onSorterChange(generateSorterInfo(newSorterStates), newSorterStates);\n  }\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectSorter(prefixCls, innerColumns, mergedSorterStates, triggerSorter, sortDirections);\n  };\n\n  var getSorters = function getSorters() {\n    return generateSorterInfo(mergedSorterStates);\n  };\n\n  return [transformColumns, mergedSorterStates, columnTitleSorterProps, getSorters];\n}"]},"metadata":{},"sourceType":"module"}
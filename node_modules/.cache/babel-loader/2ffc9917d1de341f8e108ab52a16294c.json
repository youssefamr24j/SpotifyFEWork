{"ast":null,"code":"var _jsxFileName = \"D:\\\\Rehab\\\\Studies\\\\Senior 1\\\\Semester 2\\\\Software Engineering\\\\SpotifyFEWork\\\\src\\\\Components\\\\loginForm.js\";\nimport React, { Component } from \"react\";\nimport \"./login.css\";\nimport \"./page.js\";\n\nclass Loginform extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = e => {\n      this.setState({\n        nameError: \"\",\n        passwordError: \"\"\n      });\n      e.preventDefault();\n\n      if (this.isValid()) {\n        //-------------------------------------------------------\n        let url = process.env.URL + \"/users/login\";\n        let data = this.state.user;\n        fetch(url, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-TYpe': 'application/json'\n          },\n          body: JSON.stringify(data)\n        }).then(resultss => {\n          resultss.json().then(resp => {\n            console.warn(resp);\n            var h = resp.token;\n            localStorage.setItem('tokenfromlogin', h);\n            this.setState({\n              loggedIn: true\n            });\n          });\n        });\n      }\n\n      if (this.state.loggedIn === false && this.isValid()) {\n        {\n          this.setState({\n            loggingError: \"Incorrect user or password\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      identifier: \"\",\n      password: \"\",\n      isLoading: false,\n      nameError: \"\",\n      passwordError: \"\",\n      loggedIn: false,\n      loggingError: \"\",\n      user: false //array of users\n\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n  }\n  /*\r\n    componentDidMount(){\r\n      let url= process.env.URL + \"/users/login\";\r\n      fetch(url,{\r\n        method:'GET',\r\n        headers:{\r\n          'Accept':'application/json',\r\n          'Content-TYpe':'application/json',\r\n        }\r\n      }).then((result)=> {\r\n       result.json().then((resp) =>{\r\n  \r\n  this.setState({user:resp})\r\n       })\r\n      })\r\n    } \r\n    */\n\n\n  isValid() {\n    if (this.state.identifier.length < 1 && this.state.password.length < 1) {\n      this.setState({\n        nameError: \"Please enter your Spotify username or email address.\",\n        passwordError: \"Please enter your password.\"\n      });\n    } else if (this.state.identifier.length < 1 && this.state.password.length > 0) {\n      this.setState({\n        nameError: \"Please enter your Spotify username or email address.\"\n      });\n    } else if (this.state.password.length < 1 && this.state.identifier.length > 1) {\n      this.setState({\n        passwordError: \"Please enter your password.\"\n      });\n    } else {\n      return true;\n    }\n  }\n\n  render() {\n    const {\n      identifier,\n      password,\n      isLoading,\n      loaded\n    } = this.state;\n\n    if (this.state.loggedIn) {\n      return window.location.href = \"/Home\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"form\", {\n      id: \"loginForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, \" To continue,log in to Spotify \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, this.state.loggingError), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 64\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn2\" //alert(\"try later\");\n      ,\n      onClick: this.onSubmit,\n      disabled: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, \"CONTINUE WITH FACEBOOK\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, \"OR\"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"identifier\",\n      field: \"identifier\",\n      value: identifier,\n      className: \"center\",\n      type: \"text\",\n      placeholder: \"Enter Username or Email \",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, this.state.nameError), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      field: \"password\",\n      value: password,\n      type: \"password\",\n      className: \"center\",\n      placeholder: \"Password\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, this.state.passwordError), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 65\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: this.onSubmit,\n      disabled: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, \"LOG IN\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/page\",\n      className: \"hyperLink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, \"Forgot your password?\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }, \"Don't have an account ?\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn3\",\n      href: \"/signup\",\n      disabled: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, \"SIGN UP FOR SPOTIFY\"));\n  }\n\n}\n\nexport default Loginform;","map":{"version":3,"sources":["D:/Rehab/Studies/Senior 1/Semester 2/Software Engineering/SpotifyFEWork/src/Components/loginForm.js"],"names":["React","Component","Loginform","constructor","props","onChange","e","preventDefault","setState","target","name","value","onSubmit","nameError","passwordError","isValid","url","process","env","URL","data","state","user","fetch","method","headers","body","JSON","stringify","then","resultss","json","resp","console","warn","h","token","localStorage","setItem","loggedIn","loggingError","identifier","password","isLoading","bind","length","render","loaded","window","location","href"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./login.css\";\r\nimport \"./page.js\";\r\n\r\nclass Loginform extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      identifier: \"\",\r\n      password: \"\",\r\n      isLoading: false,\r\n      nameError: \"\",\r\n      passwordError: \"\",\r\n      loggedIn: false,\r\n      loggingError: \"\",\r\n      user:false,  //array of users\r\n      \r\n       \r\n    };\r\n\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n/*\r\n  componentDidMount(){\r\n    let url= process.env.URL + \"/users/login\";\r\n    fetch(url,{\r\n      method:'GET',\r\n      headers:{\r\n        'Accept':'application/json',\r\n        'Content-TYpe':'application/json',\r\n      }\r\n    }).then((result)=> {\r\n     result.json().then((resp) =>{\r\n\r\nthis.setState({user:resp})\r\n     })\r\n    })\r\n  } \r\n  */\r\n  onChange = e => {\r\n    e.preventDefault();\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  isValid() {\r\n    if (this.state.identifier.length < 1 && this.state.password.length < 1) {\r\n      this.setState({\r\n        nameError: \"Please enter your Spotify username or email address.\",\r\n        passwordError: \"Please enter your password.\"\r\n      });\r\n    } else if (\r\n      this.state.identifier.length < 1 &&\r\n      this.state.password.length > 0\r\n    ) {\r\n      this.setState({\r\n        nameError: \"Please enter your Spotify username or email address.\"\r\n      });\r\n    } else if (\r\n      this.state.password.length < 1 &&\r\n      this.state.identifier.length > 1\r\n    ) {\r\n      this.setState({ passwordError: \"Please enter your password.\" });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onSubmit = e => {\r\n\r\n    this.setState({ nameError: \"\", passwordError: \"\" });\r\n    e.preventDefault();\r\n\r\n    if (this.isValid()) {\r\n      //-------------------------------------------------------\r\n        let url=process.env.URL + \"/users/login\";\r\n     let data=(this.state.user)\r\n     fetch(url,{\r\n      method:'POST',\r\n      headers:{\r\n        'Accept':'application/json',\r\n        'Content-TYpe':'application/json',\r\n      },\r\n      body:JSON.stringify(data)\r\n    }).then((resultss)=> {\r\n     resultss.json().then((resp) =>{\r\n    console.warn(resp)\r\n    var h =resp.token;\r\n   \r\n    localStorage.setItem('tokenfromlogin',h)\r\n    this.setState({\r\n      loggedIn: true\r\n    });\r\n        \r\n     })\r\n    })\r\n  \r\n      }\r\n      if(this.state.loggedIn===false && this.isValid() ) {\r\n       { \r\n         this.setState({loggingError:\"Incorrect user or password\"})\r\n         }\r\n    }\r\n  \r\n  };\r\n  render() {\r\n    const { identifier, password, isLoading,loaded } = this.state;\r\n    \r\n    if (this.state.loggedIn) {\r\n      return (window.location.href = \"/Home\");\r\n    }\r\n\r\n    return (\r\n      <form id=\"loginForm\">\r\n        <h3> To continue,log in to Spotify </h3>\r\n        <div className=\"error\">{this.state.loggingError}</div> <br />\r\n        <button\r\n          className=\"btn2\"\r\n          \r\n            //alert(\"try later\");\r\n            onClick={this.onSubmit}\r\n          \r\n          disabled={isLoading}\r\n        >\r\n          CONTINUE WITH FACEBOOK\r\n        </button>\r\n        <h3>OR</h3>\r\n        <input  \r\n          name=\"identifier\"\r\n          field=\"identifier\"\r\n          value={identifier}\r\n          className=\"center\"\r\n          type=\"text\"\r\n          placeholder=\"Enter Username or Email \"\r\n         \r\n          onChange={this.onChange}\r\n        />\r\n        <div className=\"error\">{this.state.nameError}</div> <br />\r\n        <input\r\n          name=\"password\"\r\n          field=\"password\"\r\n          value={password}\r\n          type=\"password\"\r\n          className=\"center\"\r\n          placeholder=\"Password\"\r\n          onChange={this.onChange}\r\n        />\r\n        <div className=\"error\">{this.state.passwordError}</div> <br />\r\n        <button className=\"btn\" onClick={this.onSubmit} disabled={isLoading}>\r\n          LOG IN\r\n        </button>{\" \"}\r\n        <br />\r\n        <a href=\"/page\" className=\"hyperLink\">\r\n          Forgot your password?\r\n        </a>\r\n        <hr />\r\n        <h3>Don't have an account ?</h3>\r\n        <a className=\"btn3\" href=\"/signup\" disabled={isLoading}>\r\n          SIGN UP FOR SPOTIFY\r\n        </a>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loginform;\r\n"]},"metadata":{},"sourceType":"module"}